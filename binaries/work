#!/bin/bash

if test -z "$WORKSPACE"; then
  if test -d "$HOME/Documents"; then
    WORKSPACE="$HOME/Documents"
  else
    echo "ERROR: WORKSPACE is not set"
    return 1
  fi
fi
query=""
if test "$1" = "-"; then
  cd "$WORKSPACE" || return
  return
elif test -n "$@"; then
  query="-q $*"
fi
cd "$(find "$WORKSPACE" -mindepth 1 -maxdepth 1 -type d | fzf --height=20 '--preview=git -C {} branch' '--bind=ctrl-/:toggle-preview' "$query")" || return
