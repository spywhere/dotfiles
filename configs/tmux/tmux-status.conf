# Enable status line
set -g status on
set -g status-position bottom

# Symbol Reference: https://github.com/ryanoasis/powerline-extra-symbols
black_color=colour16
white_color=colour15
gray_color=colour235
yellow_color=colour214
light_blue_color=brightblue
dark_blue_color=colour32
red_color=colour196

copy_highlight_color=colour238
copy_text_color=colour250
pane_active_border_color=$light_blue_color
pane_border_color=$gray_color
message_color=$gray_color
message_text_color=$white_color
status_color=$gray_color
status_highlight_color=$light_blue_color,bold
status_text_color=$white_color

window_status_color=$gray_color
window_status_text_color=$light_blue_color
active_window_status_color=$light_blue_color
active_window_status_text_color=$white_color
window_activity_status_color=$gray_color
window_activity_status_text_color=$white_color

# Copy mode highlight color
set -g mode-style fg=$copy_text_color,bg=$copy_highlight_color

# Status line style
set -g status-style bg=$status_color
set -g pane-active-border-style fg=$pane_active_border_color
set -g pane-border-style fg=$pane_border_color
set -g message-style bg=$message_color,fg=$message_text_color
set -g message-command-style bg=$message_color,fg=$message_text_color

# Music player
set -g @now-playing-playing-icon "▶"
set -g @now-playing-auto-interval "yes"

# Running app
set -g @running-app-status-left-format "{docker}{podman}"

set -g @running-app-docker-linux "no"
set -g @running-app-docker-icon ""
set -g @running-app-docker-icon-starting "#[fg=$status_color]#[default]"
set -g @running-app-podman-linux "no"
set -g @running-app-podman-icon ""
set -g @running-app-podman-icon-starting "#[fg=$status_color]#[default]"

# Widgets
wg_cpu="#{cpu_bg_color} #[default]"
wg_ram="#{ram_bg_color} #[default]"
sc_temperature="#(sh ~/.dots/supports/tmux/scripts/temp.sh)"
wg_temperature="#{?$sc_temperature,${sc_temperature}  ,}"
sc_running="#{running_app}"
wg_running="#{?$sc_running,  $sc_running,}"
sc_music="#{now_playing}"
wg_music="#{?#{>=:#{p-4:window_width}, 120},#{?$sc_music,#[fg=$status_color#,reverse]#[default] $sc_music #[fg=$status_color]#[default],},}"

sc_weather="#(sh ~/.dots/supports/tmux/scripts/weather.sh)"
wg_weather="#{?#{&&:$sc_weather,#{m/ri:c$,$sc_weather}},#[fg=$status_color#,reverse]#[default]$sc_weather,}"

sc_kbd="#(sh ~/.dots/supports/tmux/scripts/kbd.sh)"
wg_kbd="#{?$sc_kbd,#[bg=$status_color#,fg=$red_color]#[default]#[bg=$red_color]$sc_kbd #[fg=$status_color#,bg=$red_color]#[default],}"

wg_prefix="#{?client_prefix,#[fg=$status_color#,reverse]#[default]^A #[fg=$status_color]#[default],}"

sc_datetime_full="%a#%V %d %B %y#, %H:%M"
sc_datetime_day="%a %d %B %y#, %H:%M"
sc_datetime_date="%d %B %y#, %H:%M"
sc_datetime_time="%H:%M"
wg_datetime_time="#{?#{>=:#{p-4:window_width},  55}, $sc_datetime_time,}"
wg_datetime_date="#{?#{>=:#{p-4:window_width},  70}, $sc_datetime_date,$wg_datetime_time}"
wg_datetime_day="#{?#{>=:#{p-4:window_width},  75}, $sc_datetime_day,$wg_datetime_date}"
wg_datetime_full="#[fg=$status_color#,reverse]#[default]#{?#{>=:#{p-4:window_width},  80}, $sc_datetime_full,$wg_datetime_day} #[fg=$status_color]"

# Status left
set -g status-left-length 200
set -g status-left-style fg=$status_text_color,bg=$status_highlight_color
set -g status-left "$wg_cpu$wg_ram $wg_temperature#S$wg_running #[fg=$status_color#,reverse]#[default]"

# Status right
set -g status-right-length 200
set -g status-right-style fg=$status_text_color,bg=$status_highlight_color
set -g status-right "#[default]$wg_prefix$wg_music$wg_kbd$wg_datetime_full$wg_weather "

# Windows on status line
set -wg window-status-activity-style fg=$window_activity_status_text_color,bg=$window_activity_status_color
set -wg window-status-separator ""
set -wg window-status-style fg=$window_status_text_color,bg=$window_status_color
set -wg window-status-format "  #I  #{?window_zoomed_flag,+,}#W#{?window_zoomed_flag,+,} "
set -wg window-status-current-style fg=$active_window_status_text_color,bg=$active_window_status_color
set -wg window-status-current-format "#[fg=$status_color]#[default] #I  #{?window_zoomed_flag,+,}#W#{?window_zoomed_flag,+,}#[fg=$status_color,reverse]#[default]"
